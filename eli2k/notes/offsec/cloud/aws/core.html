<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta https-equiv="content-type" content=
  "text/html; charset=UTF-8">
  <title>AWS</title>
  <meta name="viewport" content=
  "initial-scale=1.0, maximum-scale=1.0, width=device-width">
  <meta name="description" content=
  "My notes from various labs and certs.">
  <meta name="robots" content="index, follow">
  <meta property="og:url" content="https://eli2k.com/">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Home">
  <meta property="og:description" content="Home">
  <meta property="og:image" content=
  "https://eli2k.com/resources/images/homepage.png">
  <link rel="stylesheet" href=
  "https://eli2k.com/resources/css/style.css">
  <link rel="icon" href=
  "https://eli2k.com/resources/images/bluscrn.gif" type=
  "image/gif">
  <link rel="stylesheet" href=
  "https://eli2k.com/resources/css/prism.css">
  <link rel="stylesheet" href=
  "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
  <input type="checkbox" class="theme-switch" id="theme-switch">
  <div id="page">
    <label for="theme-switch" class="switch-label"></label>
    <script src="https://eli2k.com/resources/js/prism.js"></script>
    
    <script>

    NekoType = "robot"
    </script>
    <h1 id="nl">
    <script src=
    "https://webneko.net/n20171213.js"></script><a href="https://webneko.net">Neko</a></h1>
    <div id="container">
      <div id="header">
        <div class="text-container">
          <span>E</span> <span>L</span> <span>I</span> <span>2</span> <span>K</span>
        </div>
      </div>
      <div id="left-sidebar"></div>
      <div class="divider"></div>
      <div class="pageContent">
        <div class="nav border">
          <ul>
            <a href="https://eli2k.com/" title="The homepage. acts as an index for all of the indexes.">
              <li>Home
              </li>
            </a>
            <a href="https://github.com/Eli2k765" title="My Github.">
              <li>Github
              </li>
            </a>
          </ul>
        </div>
        <div class="page-content blog border"><button id="toggle-all-btn">Show All</button>
          <div class="box">
            <div class="inner-box-content">
              <div class="article-wrapper">
                <h1>AWS</h1>
                <p class="alert">Intro to AWS Core Services and how to hack them</p>
                <strong>Last updated: May 4th, 2023</strong>
                <article>
                  <div id="contain">
                    <h3>Intro</h3>
                    <div>
                      <h4>Accounts</h4>
                      <div>
                        <ul>
                          <li>AWS Account</li>
                          <ul>
                            <li>Container for resources</li>
                            <li>Unique 12-digit ID</li>
                            <li>Security boundary, root creds are the only way to access control plane</li>
                          </ul>
                          <li>Root User</li>
                          <ul>
                            <li>One email = one root user</li>
                            <li>IAM superuser</li>
                            <li>AWS Organisations root setup commonly results in a root user with weak passwords and no MFA</li>
                            <li>Quit Riot is a tool to enumerate valid root user email addresses</li>
                          </ul>
                        </ul>
                      </div>
                      <h4>IAM</h4>
                      <div>
                        <ul>
                          <li>IAM engine evaluates access granted to IAM principles through a series of logic statements that begin with implicit deny and are evaluated to explicit deny or explicit allow.</li>
                          <li><img src="https://eli2k.com/resources/images/notes/PolicyEvaluation.png" alt="A logic chart showing that all policy decisions start with an implicit deny, then evaluates to either explicit deny or explicit allow for Org SCPs, Resource-Based policies, ID-Based policies, IAM permission boundaries and Session Policies."></li>
                          <li>IAM roles</li>
                          <ul>
                            <li>AWS principles that have permissions</li>
                            <li>assume-role/switch-role</li>
                            <ul>
                              <li>Allow other identities to gain privileges of another IAM role as determined by the "assume-role trust policy"</li>
                            </ul>
                          </ul>
                          <li>Supports SAML and OpenID</li>
                          <li>Identity Center allow IdP access to permission sets</li>
                        </ul>
                      </div>
                      <h4>Organizations</h4>
                      <div>
                        <ul>
                          <li>Hierarchical</li>
                          <li>Organizational policies can be used to restrict child accounts</li>
                        </ul>
                      </div>
                      <h4>VPC</h4>
                      <div>
                        <ul>
                          <li>Allow network segmentation</li>
                          <li>Default VPC Service Caps</li>
                          <ul>
                            <li>DNS Resolver @ 169.254.169.253</li>
                            <li>NTP @ 169.254.169.123</li>
                            <li>KMS Service for Windows Licensing @ 169.254.169.250-1</li>
                            <li>EC2 @ 169.254.169.254</li>
                            <li>ECS @ 169.254.170.2</li>
                          </ul>
                        </ul>
                      </div>
                    </div>
                    <h3>S3</h3>
                    <div>
                      <h4>Terms and Concepts</h4>
                      <div>
                        <ul>
                          <li>Bucket</li>
                          <ul>
                            <li>A flat file storage system that can hold objects (files) up to 5TB</li>
                            <li>Pseudohierarchical folders are used but buckets can not contain other buckets</li>
                          </ul>
                          <li>Access Controls</li>
                          <ul>
                            <li>s3:GetObject (read) and s3:PutObject (write)</li>
                            <li>Access Control Lists</li>
                            <ul>
                              <li>S3 Buckets before November 2021 used ACL's, they are recommended to be disabled but some still use them now.</li>
                              <li>Identity-based</li>
                            </ul>
                            <li>Bucket Policies</li>
                            <ul>
                              <li>More human-readable syntax</li>
                              <li>Resource-based</li>
                            </ul>
                          </ul>
                        </ul>
                      </div>
                      <h4>Public S3 Buckets</h4>
                      <div>
                        <ul>
                          <li>Until 2018, new buckets were public by default.</li>
                          <li>Many ways to find</li>
                          <ul>
                            <li>Search Engines</li>
                            <li>Web page source</li>
                            <li>DNS recon</li>
                            <li>Subdomain recon</li>
                            <li>Naming Conventions</li>
                          </ul>
                          <li>You can download an s3 bucket using the aws cli</li>
                          <ul>
                            <li><pre><code class="language-bash">aws s3 sync s3://{bucket-name} . --no-sign-request</code></pre></li>
                          </ul>
                        </ul>
                      </div>
                    </div>
                    <h3>EC2</h3>
                    <div></div>
                    <h3>VPC</h3>
                    <div></div>
                    <h3>AWS Encryption Services</h3>
                    <div></div>
                  </div>
                </article>
              </div>
            </div>
          </div>
        </div>
        <div class="footer border"></div>
      </div>
    </div>
    <script src=
    "https://eli2k.com/resources/js/themeSwitch.js"></script>
    <script src=
    "https://eli2k.com/resources/js/collapseList.js"></script>
    
  </div>
</body>
</html>
